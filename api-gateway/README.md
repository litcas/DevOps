# API Gateway

# tyk

tyk是一个开源的api gateway，分为两个部分，一个是tyk gateway，一个是tyk dashboard。 
相比于其他同类产品，其包含的功能最全面，开源程度最高。


# API 网关 功能列表


### 1. 请求路由，版本控制

API Gateway 是微服务的入口，可以根据不同的请求路由到不同的服务上，也可以在 Gateway 上进行路由的版本控制，这样即使后服务发生了变化，Gateway 的路径依然可以不改变。


### 2.用户登录，权限认证 

Oauth2鉴权、Jwt鉴权。客户端在与我们后端服务进行交互之前，需要先进行登录鉴权操作，这是后端所有的服务都需要有的共有逻辑，因此在 Gateway 做这个事情就再合适不过。

### 3.数据聚合

由于不同的客户端往往需要的数据完全不同，而这些数据又是不同的 service 提供的，比如上面提到的查看一个商品详情页，我们可能需要同时从商品服务，库存服务，评价服务等中拉取信息，我们可以借助 Gateway 方便完成来自不同 service 的数据聚合。

### 4.协议转换

在我们的实践中，CS（Client to Server）协议和SS（Server to Server）协议是不一样的，为了保证数据传输的可靠性，我们的CS协议会有鉴权以及加密解密的逻辑，而在内部的SS协议则不需要这些逻辑，因此在 Gateway 我们需要有一个协议转换的过程。

### 5.熔断，降级，限流

当监测到某个服务发生异常，或者当服务的流量超过我们服务的承载能力等情况时，我们可以采取相应的措施，对整个系统的容错性、稳定性有很大帮助。

### 6. 负载均衡

API 网关知道所有服务实例的地址，所以可以根据不同服务采取不同的负载均衡策略


### 7.灰度发布

有时候我不希望让所有的流量都一次性的到达程序的新版本，因为那个新版本也许并没有测试地很充分。灰度发布允许你直接只导入指定量的流量到新的版本，API 网关就可以帮你来做这件事情。你可以配置10%的请求到新的版本，然后一旦你确保了新版本没有bug，你可以把流量切换到100%。



## 仪表盘管理端(Dashboard)


Dashboard 提供可视化的分析平台:

* 服务的管理
* 准入控制
* Ip黑名单
* 监控数据报警配置
* APM调用链
* 流控策略
* 日志查询
* 灰度发布操作
* API文档管理等
